# 가상계좌 알림 시스템 기획서

## 개요
본 문서는 가상계좌 기반 웹 시스템 내에서 입금 알림, 처리 결과, 계좌 만료 등 주요 트리거 상황에 대해 카카오톡/이메일 등 채널로 자동 발송되는 전체 알림 프로세스, 조건, 관리 기능 및 보안/컴플라이언스 관리 방안을 체계적으로 정리합니다.

---

## 1. 알림 발송 트리거 및 조건
- **입금 확인**: 고객이 지정 가상계좌로 정상 입금 시 즉시 발송
- **입금 실패**: 입금 금액 미일치, 계좌 정보 오류 등 매칭 실패 시 발송
- **계좌 만료**: 만료 도래 1~3일 전 사전 안내, 만료 시점 알림 각각 발송
- **관리자 알림**: 대량 미매칭 건, 시스템 장애, 외부 API 연동 실패 등 비상 상황 발생 시 실시간 통지

### 상세 예시
| 트리거           | 수신자      | 채널         | 주요 메시지 내용       |
|:----------------|:----------|:------------|:----------------------|
| 입금 확인        | 고객      | 카카오톡, 이메일 | ‘입금 확인’ 내역 & 주문 정보 |
| 입금 실패        | 고객      | 카카오톡, 이메일 | 오류 내역, 재입금 안내      |
| 계좌 만료 예정   | 고객      | 카카오톡, 이메일 | 만료예정일/연장 방법 안내    |
| 시스템 장애 등   | 관리자    | 이메일, (SMS 선택) | 장애 내역, 조치 요청         |

---

## 2. 채널별 상세 정책
- **카카오톡:** 알림톡(고객용), 친구톡(광고/상담), 관리자 그룹(비공개 채널)
- **이메일:** 발신계정 도메인 스풀링; 자동화 템플릿별 변수 치환; 첨부 파일(엑셀 등) 지원
- **SMS:** 한도 초과, 카카오톡 실패 등 보완 채널로 선택적 발송

---

## 3. 알림 관리 기능 (관리자 대시보드)
### 관리자 대시보드
- **알림 내역 기록/조회**: 발송 성공/실패 데이터, 이력 DB화; 조건별 검색 및 필터링 제공
- **수신자 관리**: 고객별 알림 수신 동의/철회 설정, 관리자별 알림 그룹 편성
- **발송 재처리/수동발송**: 자동 실패건 재처리, 특정 알림 선택적 수동 전송 기능
- **엑셀 다운로드**: 알림 내역, 실패 건 리포트 등 엑셀 추출 지원
- **설정 관리**: 알림 발송 조건, 시간대, 템플릿 문구 및 예시 메시지 직접 관리 가능

| 기능             | 설명                                                                    |
|------------------|-------------------------------------------------------------------------|
| 내역 조회         | 기간/사용자/결과별 검색, 상세 발송 로그                                    |
| 발송 설정        | 템플릿 관리, 조건별 채널 설정, 발송 제한 설정                              |
| 오류 관리        | 실패 건 원인 확인 및 재발송, 문제 알림 실시간 관리자 전달                   |
| 리포트           | 일별/월별 발송·실패·열람 통계 리포트, 대시보드 그래프                       |

---

## 4. 보안/컴플라이언스
### 보안/컴플라이언스
- **권한 및 접근 관리**: 알림 내역 열람/관리 기능 관리자/슈퍼관리자 구분 권한 부여
- **로그인·2차 인증**: 관리자 대시보드 접속 시 2단계 인증, 접근 통제, 세션 타임아웃 제공
- **고객 개인정보 보호**: 메시지 내 개인정보 최소화, 이메일 본문 암호화, 로그 기록별 비식별 처리
- **내부 이상 접근 감지**: 알림 시스템 설정 변경 및 다중 실패 시 관리자에게 자동 경고
- **컴플라이언스 준수**:
    - 정보통신망법/전자금융거래법 및 개인정보보호법 등 관련 규정 적용
    - 발신 이력 5년 보관 및 개인정보 보유/파기 정책 구현

---

## 5. 주요 요구조건 요약
- 알림 발송 채널 최소 2종(카카오톡+이메일) 이상, 상황별 다중 트리거 지원
- 관리자 전용 대시보드 내 통합 조회, 관리 및 통계 리포트 필수
- 장애·오류 건, 민감 정보 노출 시 관리자 알림 자동화, 상세 권한 제어 적용
- 사용자 편의성과 법적/보안 측면 모두 강화하는 형태로 구현

# 가상계좌 서비스 개요

## 1. 문서 목적
이 문서는 신규 백엔드 기반 웹 시스템에서 제공할 가상계좌 서비스의 전반적인 개요를 파악하고, 프로젝트 수행 및 상세 기능 설계의 기반을 마련하는 데 목적이 있습니다. 본 개요서는 프로젝트 주요 목표, 도입 배경, 핵심 기능, 사용자 및 역할별 요구사항, 주요 서비스 플로우, 확장 방향 등을 종합적으로 설명합니다.

## 2. 시스템 배경 및 도입의 필요성
기존 오프라인/반자동 입금 확인 방식은 인적·시간적 오류가 잦고, 대량 거래·정산에서 관리 효율성이 저하되는 문제가 있었습니다. 시장 경쟁력 확보와 운영비 절감, 실시간 자동화된 입금 매칭, 관리자의 효율적 입출금 처리 지원이 반드시 필요해졌습니다. 또한 외부 서비스(ERP, 쇼핑몰 등)와의 연동, 다양한 입금 확인 및 알림 제공, 강화된 보안과 관리 권한 체계 도입 등이 요구되는 상황입니다.

## 3. 주요 기능
- **가상계좌 발급**: 은행·PG 연동(KG이니시스/Toss Payments) API를 활용해 고객별 1회성·반복성 계좌를 자동 생성. 발급시 계좌 유효기간·한도, 고객 데이터와 자동 매핑.
- **입금내역 자동 확인·매칭**: 외부 API 통한 실시간 입금내역 수집 및 발급 계좌와 자동 매칭. 오입금·지연 입금건 별도 관리. 입금 처리 결과를 고객·관리자에 분류별로 노출.
- **입금/처리 알림**: 카카오톡 알림톡, 이메일 등으로 실시간 입금 확인, 실패, 계좌 만료, 기타 상태 알림 발송. 수신 대상별(고객, 담당자, 관리자) 조건 다층 설정, 발송 이력 관리.
- **외부 연동**: ERP(더존 iCUBE/REST API), 쇼핑몰(Cafe24·고도몰 Webhook) 등 외부 시스템에 실시간 입금 상태 반영. 동기/비동기 데이터 전송 및 오류/리트라이 관리.
- **관리자 대시보드**: 실시간 입금현황, 필터링/검색, 계좌·고객별 이력조회, 엑셀 다운로드, 알림 이력 통합 관리. 통계 뷰 제공, 권한별 접근 영역 분리.
- **보안 및 권한 관리**: 관리자 로그인 및 2단계 인증, 역할별 권한(일반 관리자/슈퍼관리자) 설정, 감사로그 기록. 인증방식(OAuth2/HMAC) 적용 및 정책 별도 정의.
- **서버 및 인프라**: AWS EC2+RDS 기반 인프라에 CI/CD, 모니터링 도구 연계, 장애대응 플랜 적용.

## 4. 주요 사용자 및 역할
- **고객**: 회원가입 및 서비스 신청 시 가상계좌 발급. 본인 명의 계좌 정보, 입금 완료 후 상태·알림 수신. 입금 과정 안내 및 이력 확인.
- **관리자**: 계좌 발급/매칭 현황 실시간 모니터링. 수동 입금 처리(예외건), 각종 통계/리포트 추출, 알림조건 및 외부 연동 설정. 권한에 따라 대시보드 구성 변경 가능.
- **슈퍼관리자(선택적)**: 전체 시스템 설정·관리, 관리자 권한 관리 및 각종 정책/보안 설정. 감사 로그 확인 및 시스템 장애 시 전체 조치.

## 5. 전체 서비스 플로우
1. **고객 등록**: 회원가입 또는 주문·신청 단계에서 개인정보 및 서비스 요청 접수.
2. **계좌 발급**: 관리자의 승인 또는 자동 발급 프로세스에 따라 은행/PG를 통해 가상계좌 생성, 고객에게 정보 노출.
3. **입금 진행**: 고객이 부여받은 계좌로 금액 송금. 은행·PG 서버에서 실시간 입금 내역 송신.
4. **자동 매칭**: 입금 데이터와 계좌 정보 매칭. 정상·미달·초과 입금, 오입금 등 케이스별 상태 분기.
5. **상태/처리 알림**: 매칭 성공 시 즉시 알림톡·이메일 발송, 실패·만료·재입금 필요시 추가 안내.
6. **외부 시스템 연동**: ERP·쇼핑몰로 입금 상태/결과 전송. 데이터 반영 실패시 재시도, 관리자에게 이상 알림 전송.
7. **모니터링 및 관리**: 관리자 대시보드에서 실시간 현황, 이력, 통계 등 통합 관리, 각종 설정 변경·다운로드 지원.

실제 업무에서는 단건/대량 주문, 비회원 처리, 입금 오류시 재처리, 동시 다건 알림 등 다양한 케이스가 발생할 수 있으므로 시나리오별 검토와 대응 프레임워크가 필요합니다.

## 6. 활용 및 확장 방향
- **기대효과**: 입금 관리 자동화로 업무 효율성 및 정확도 향상, 인건비·오류 감소, 고객 CS 만족도 제고. 실시간 연동된 정보 분석으로 사업 관리/예측 역량 강화.
- **운영시 유의점**: 신규 외부 파트너(은행/PG/ERP/쇼핑몰) 연동시 API 변경, 대량 동시 입금 처리 성능 확보 필요. 보안 인증 정책 주기적 재점검, 관리자 인가 및 이력관리 강화.
- **추후 확장성**: 추가 결제수단, 다양한 알림채널, 복수 ERP/쇼핑몰·해외 사용자 지원, 정산 및 회계 자동화 등 유연한 확장 설계 고려. 성공적인 도입 후 업무서식 및 문서관리 시스템과 통합도 검토 예정.

---
본 문서는 추후 각 세부 설계 및 정책 문서와 유기적으로 연계되어 보완·확장될 예정입니다. 추가 의견 및 피드백은 언제든 환영합니다.
# 7. 가상계좌 시스템 보안 정책(07_virtual_account_security.md)

## 1. 개요
이 문서는 신규 웹 기반 가상계좌 서비스의 전반적 보안체계, 권한 분리, 인증방식, 2차 인증, API 보안 등 핵심 요구 사항을 정의한다. 본 정책은 강력한 인증, 민감정보 보호, 역할·권한 분리, 외부 연동 보안, 운영 가이드까지 아우른다.

## 2. 목표 및 기본 원칙
- 고객/관리자/슈퍼관리자 역할별 최소 권한 원칙 적용
- 민감 정보와 자금 내역 보호 및 감사 추적 가능성 확보
- 인증방식 다중화(비밀번호, OTP, 2차 인증 등)
- 외부 시스템(API/ERP/PG) 통신보안(OAuth2 혹은 HMAC) 적용

## 3. 인증/인가 정책
### 3.1 관리자 로그인
- 복잡도 높은 사내·특정IP 접근 제한
- 비밀번호 정책(최소 8자리+특수문자
- 5회 이상 실패 시 계정 잠금

### 3.2 2차 인증(OTP/이메일 등)
- 최초 로그인, 민감기능 접근(엑셀다운로드, 권한변경, 계좌발급 등) 시 OTP(구글 OTP/이메일) 검증 필수 적용
- 2차 인증 내역 감사 로그 저장

### 3.3 고객 인증
- 표준 ID/PW 로그인 외 2단계 이메일 인증 옵션 제공(희망 시)

### 3.4 API 인증(외부 연동)
- ERP/쇼핑몰 등 외부 호출: OAuth2 Client Credential Flow 또는 HMAC 기반 토큰 사용
- 토큰 만료 및 Blacklist/Whitelist 관리
- 요청마다 Scope 제한 및 기록(로그 추적)

## 4. 권한 및 역할 관리
- 슈퍼관리자: 전체 시스템/권한관리, 보고서 열람
- 관리자: 계좌 조회/발급/입금확인/고객관리, 단 일부 권한 기능만 접근 가능(예: 알림관리)
- 고객: 개인선택 메뉴, 입금/계좌 내역만 접근
- 역할별 권한 테이블 및 접근 제어(매트릭스) 구현

## 5. 데이터/통신 보안
- DB: 개인정보/계좌번호 암호화 저장(AES256, FIPS 인증 알고리즘)
- 네트워크: HTTPS/TLS 1.2 이상 필수, AWS 보안그룹을 통한 외부 접근제한
- 로그: 접근/변경/다운로드 등 모든 민감 행위에 대하여 감사 로그 기록, 6개월 이상 저장
- 백오피스 세션 Timeout(30분), 세션 재확인

## 6. 외부 시스템 연동 시 보안
- ERP/쇼핑몰/PG사 연동 API Key 주기적 변경 및 접근 IP 제한
- Webhook 통한 데이터 유입 시 Payload 서명 검증

## 7. 운영/모니터링
- 운영자 알림: 이상 접근, 권한변경 감지 시 즉시 관리자 알림 전송
- CI/CD 및 배포 자동화 시 보안 취약점 점검 및 스캔 프로세스 적용
- 정기 취약점 점검 및 패치 관리

## 8. 결론 및 추가 참고
- 보안 정책/인증 구조 설계 변경 시 모든 관계자 결재 및 이력화
- 향후 추가 보안 요구사항은 관리자 대시보드 내 알림으로 통합 처리

[목차로 돌아가기](./00_virtual_account_toc.md)
